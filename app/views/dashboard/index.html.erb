<div class="container">
  <br>
  <%# user avatar name and social media %>
  <div class="border border-primary d-flex align-items-center">

    <%# user avatar  %>
    <div>
      <% if current_user.avatar.present? %>
        <i class="avatar-user border border-primary fa-solid fa-user"></i>
      <% else %>
          <%= image_tag "https://kitt.lewagon.com/placeholder/users/mchancfy", class: "avatar-user border border-primary" %>
        <%# cloudinary upload %>
        <%# <%= cl_image_tag current_user.avatar.key, height: 300, width: 400, crop: :fill %>
      <% end %>
    </div>

    <%# user social media/contact %>
    <div class="border border-primary">
      <h1><%= current_user.username %></h1>

      <i class="fa-solid fa-envelope"></i>

      <% if current_user.twitter.present? %>
        <i class="fa-brands fa-twitter"></i>
      <% end %>

      <% if current_user.instagram.present? %>
        <i class="fa-brands fa-instagram"></i>
      <% end %>
    </div>
  </div>

  <%# user bio %>
  <div class="border border-primary">
    <p>Bio: <%= current_user.bio %></p>
  </div>

  <br>

  <%# User Manga box %>
  <div>

    <%# My Manga title + manga_new_path %>
    <div class="border border-primary d-flex justify-content-between align-items-end">
      <h3>My Manga</h3>
      <h4>Upload manga :D
        <%= link_to new_manga_path do %>
        <i class="fa-solid fa-arrow-up-from-bracket"></i>
        <% end %>
      </h4>
    </div>
    <hr>

    <%# display all user mangas %>
    <% if !@mangas.nil? %>
      <div class="cards border border-primary">
        <% @mangas.each do |manga| %>
          <div class="card border border-primary", onclick="location.href='<%= manga_path(manga) %>'">
            <% if manga.cover_image.attached? %>
              <%= cl_image_tag manga.cover_image.key, crop: :fill, alt: manga.manga_title %>
              <div class="dashboard-manga-links border border-primary">
                <p><%= link_to 'Show', manga, class: 'dashboard-manga-link' %></p>
                <p><%= link_to 'Edit', edit_manga_path(manga), class: 'dashboard-manga-link' %></p>
                <p><%= link_to "Delete",
                  mangas_path(@manga),
                  data: {turbo_method: :delete, turbo_confirm: "Are you sure?"}, class: 'dashboard-manga-link'%></p>
              </div>
            <% else %>
              <p>No cover image</p>
            <% end %>
          </div>
        <% end %>
      </div>
    <% else %>
      <p>We can't wait to see your manga!</p>
    <% end %>

    <br>

    <%# bookmark title%>
    <div class="border border-primary d-flex justify-content-between align-items-end">
      <h3>Bookmarked<i class="fa-solid fa-heart" style="color: #f39bd3;"></i></h3>
      <h4>See all -></h4>
    </div>
    <hr>

    <%# all user bookmark %>
    <% if @favorited_mangas.present? %>
      <div class="cards border border-primary">
        <% @favorited_mangas.each do |manga| %>
          <div class="card border border-primary" onclick="location.href='<%= manga_path(manga) %>'">
            <%= cl_image_tag manga.cover_image.key, crop: :fill, alt: manga.manga_title %>
          </div>
        <% end %>
      </div>
    <% else %>
      <p class="border border-primary">Start watching manga and bookmark them!</p>
    <% end %>

    <%# TODO:MARY - add top manga of the week etc %>
    <%# <%= link_to "Hot Manga of this week", top_mangas_path %>
  </div>
</div>
